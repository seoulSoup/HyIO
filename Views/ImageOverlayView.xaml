<UserControl x:Class="HyIO.Views.ImageOverlayView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ìƒë‹¨ ê²€ìƒ‰ ì˜ì—­ -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="8,0,0,16">
            <TextBox x:Name="SearchBox"
                     Width="260"
                     Height="32"
                     Padding="0,4"
                     VerticalAlignment="Center"
                     FontFamily="{StaticResource AppFontFamily}"
                     Foreground="{StaticResource AppTextPrimaryBrush}"
                     Background="{StaticResource AppSurfaceAltBrush}"
                     BorderBrush="{StaticResource AppBorderBrush}"
                     BorderThickness="1"
                     TextChanged="SearchBox_TextChanged"/>
            <TextBlock Text="íŒŒì¼ëª… ë˜ëŠ” íƒœê·¸ ê²€ìƒ‰"
                       VerticalAlignment="Center"
                       Margin="12,0,0,0"
                       Foreground="{StaticResource AppTextSecondaryBrush}"
                       FontFamily="{StaticResource AppFontFamily}"
                       FontSize="14"/>
        </StackPanel>

        <!-- ì´ë¯¸ì§€ ì¸ë„¤ì¼ ë¦¬ìŠ¤íŠ¸ -->
        <ScrollViewer Grid.Row="1"
              VerticalScrollBarVisibility="Auto"
              HorizontalScrollBarVisibility="Disabled">

            <!-- ScrollViewer ë‚´ë¶€ì—ì„œë§Œ ì“°ì´ëŠ” ScrollBar/Thumb ìŠ¤íƒ€ì¼ -->
            <ScrollViewer.Resources>

                <!-- ðŸŸ£ ë‘¥ê·¼ Thumb ìŠ¤íƒ€ì¼ (TagManagerì™€ ë™ì¼) -->
                <Style x:Key="OverlayThumbStyle" TargetType="Thumb">
                    <Setter Property="MinHeight" Value="40"/>
                    <Setter Property="Margin" Value="0,4"/>
                    <Setter Property="Background"
                            Value="{StaticResource TagScrollBarThumbBackgroundBrush}"/>
                    <Setter Property="SnapsToDevicePixels" Value="True"/>

                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="Thumb">
                                <Border Background="{TemplateBinding Background}"
                                        CornerRadius="4"/>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>

                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background"
                                    Value="{StaticResource TagScrollBarThumbHoverBackgroundBrush}"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>

                <!-- ðŸŸ§ ìŠ¤í¬ë¡¤ë°” ì „ì²´ ìŠ¤íƒ€ì¼ -->
                <Style TargetType="ScrollBar">
                    <Setter Property="Orientation" Value="Vertical"/>
                    <Setter Property="Width" Value="10"/>
                    <Setter Property="Margin" Value="2,4"/>

                    <!-- ScrollBar.Track ë°°ê²½ -->
                    <Setter Property="Background"
                            Value="{StaticResource TagScrollBarTrackBackgroundBrush}"/>

                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ScrollBar">
                                <Grid>
                                    <!-- íŠ¸ëž™ ë°”ê¹¥ ë°°ê²½ -->
                                    <Border Background="{TemplateBinding Background}"
                                            CornerRadius="5"/>

                                    <!-- ì‹¤ì œ íŠ¸ëž™ -->
                                    <Track x:Name="PART_Track"
                                        Orientation="{TemplateBinding Orientation}"
                                        Minimum="{TemplateBinding Minimum}"
                                        Maximum="{TemplateBinding Maximum}"
                                        Value="{TemplateBinding Value}"
                                        ViewportSize="{TemplateBinding ViewportSize}"
                                        IsDirectionReversed="True">

                                        <!-- ìœ„/ì•„ëž˜ ë²„íŠ¼ ì œê±° -->
                                        <Track.DecreaseRepeatButton>
                                            <RepeatButton Visibility="Collapsed" IsEnabled="False"/>
                                        </Track.DecreaseRepeatButton>
                                        <Track.IncreaseRepeatButton>
                                            <RepeatButton Visibility="Collapsed" IsEnabled="False"/>
                                        </Track.IncreaseRepeatButton>

                                        <!-- ë‘¥ê·¼ Thumb -->
                                        <Track.Thumb>
                                            <Thumb Style="{StaticResource OverlayThumbStyle}"/>
                                        </Track.Thumb>

                                    </Track>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>

            </ScrollViewer.Resources>

            <!-- ê¸°ì¡´ ItemsControl ì „ì²´ ê·¸ëŒ€ë¡œ ìœ ì§€ -->
            <ItemsControl x:Name="ImageItemsControl">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel IsItemsHost="True" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Click="ImageButton_Click"
                                Margin="4"
                                Padding="0"
                                BorderThickness="0"
                                Background="Transparent">
                            <Border Width="160"
                                    Margin="4"
                                    Padding="8"
                                    CornerRadius="12"
                                    Background="{StaticResource AppSurfaceAltBrush}">
                                <StackPanel>
                                    <Image Source="{Binding Thumbnail}"
                                        Width="144" Height="144"
                                        Stretch="UniformToFill"
                                        Margin="0,0,0,8"
                                        SnapsToDevicePixels="True"/>
                                    <TextBlock Text="{Binding FileName}"
                                            Foreground="{StaticResource AppTextPrimaryBrush}"
                                            FontSize="12"
                                            FontFamily="{StaticResource AppFontFamily}"
                                            TextTrimming="CharacterEllipsis"/>
                                    <TextBlock Text="{Binding TagsText}"
                                            Foreground="{StaticResource AppTextSecondaryBrush}"
                                            FontSize="11"
                                            Margin="0,2,0,0"
                                            FontFamily="{StaticResource AppFontFamily}"
                                            TextTrimming="CharacterEllipsis"/>
                                </StackPanel>
                            </Border>
                        </Button>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

    </Grid>
</UserControl>
